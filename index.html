<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>FG&B Docs</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'><style type='text/css'>html, body {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left-width: 1px; border-left-style: solid; border-left-color: black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left-width: 1px; border-left-style: solid; border-left-color: silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background-color: rgb(119, 238, 119); z-index: 1; background-position: initial initial; background-repeat: initial initial; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left-width: 3px; border-left-style: solid; border-left-color: rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background-color: rgba(204, 204, 204, 0.2); background-position: initial initial; background-repeat: initial initial; }
.cm-s-typora-default .CodeMirror-gutters { border-right-style: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: '•'; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: ' '; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: '↓'; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; background-color: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: initial initial; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: -webkit-fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background-color: rgb(217, 217, 217); background-position: initial initial; background-repeat: initial initial; }
.CodeMirror-focused .CodeMirror-selected { background-color: rgb(215, 212, 240); background-position: initial initial; background-repeat: initial initial; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
.CodeMirror span { }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat no-repeat; }
.CodeMirror-lint-mark-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; background-position: center center; background-repeat: no-repeat no-repeat; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=); }
.CodeMirror-lint-marker-multiple { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC); width: 100%; height: 100%; background-position: right bottom; background-repeat: no-repeat no-repeat; }


html { font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit inherit; background-repeat: inherit inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background-color: rgb(181, 214, 252); text-shadow: none; background-position: initial initial; background-repeat: initial initial; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: auto; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background-color: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; background-position: initial initial; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print {
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; background-position: initial initial; background-repeat: initial initial; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: '.'; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background-color: transparent !important; text-shadow: initial !important; background-position: initial initial !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }


@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('file:///Users/Thomas/Library/Application%20Support/abnerworks.Typora/themes/github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('file:///Users/Thomas/Library/Application%20Support/abnerworks.Typora/themes/github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('file:///Users/Thomas/Library/Application%20Support/abnerworks.Typora/themes/github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('file:///Users/Thomas/Library/Application%20Support/abnerworks.Typora/themes/github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write{
    max-width: 860px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("file:///Users/Thomas/Library/Application%20Support/images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc {
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}


</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-mac'><h1><a name='header-c5' class='md-header-anchor '></a>FG&amp;B 2017</h1><h3><a name='header-c7' class='md-header-anchor '></a>Welcome to FG&amp;B 2017</h3><h2><a name='header-c8' class='md-header-anchor '></a>Notable Achievements for 2017</h2><h5><a name='header-c9' class='md-header-anchor '></a>Regionals:</h5><h5><a name='header-c10' class='md-header-anchor '></a>States:</h5><h5><a name='header-c11' class='md-header-anchor '></a>Nationals:</h5><hr /><p></p><p><img src='FG&BFooter.png' alt='FG&amp;B Logo' /></p><hr /><h5><a name='header-c18' class='md-header-anchor '></a> </h5><h4><a name='header-c19' class='md-header-anchor '></a>Documentation written by Thomas Fraser &amp; Alistair English</h4><p><a href='fgb.bbcrobotics.org'>FG&amp;B Website</a></p><p><a href='bbc.qld.edu.au'>Brisbane Boys college, Queensland Australia</a></p><p></p><hr /><p></p><h1><a name='header-c29' class='md-header-anchor '></a>Buzzer</h1><h4><a name='header-c30' class='md-header-anchor '></a>Contains (.h)</h4><p>The Buzzer library is used to control an analog buzzer build into FG&amp;B&#39;s 2017 robots.</p><p>To use the library, import it to your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;buzzer.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the buzzer object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Buzzer</span> <span class="cm-variable">audio</span> <span class="cm-operator">=</span> <span class="cm-variable">Buzzer</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To use the buzzer call the method</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">audio</span>.<span class="cm-variable">playTone</span>(<span class="cm-number">200</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></p><h1><a name='header-c44' class='md-header-anchor '></a>Compass</h1><h4><a name='header-c45' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The Compass library is use to control the MPU9250 Compass, Gyro and Accelerometer package.</p><p>To use the library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Compass.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the compass object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Compass</span> <span class="cm-variable">compass</span> <span class="cm-operator">=</span> <span class="cm-variable">Compass</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To use the compass call these methods</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">compass</span>.<span class="cm-variable">getUpdate</span>();</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-variable">heading</span> <span class="cm-operator">=</span> <span class="cm-variable">compass</span>.<span class="cm-variable">getFinalHeading</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre><p></p><h1><a name='header-c59' class='md-header-anchor '></a>Config</h1><h4><a name='header-c60' class='md-header-anchor '></a>Contains (.h)</h4><p></p><h2><a name='header-c63' class='md-header-anchor '></a>Config.h</h2><p>Config contains configurable constants useful for modifying the behaviour of the robot.</p><h2><a name='header-c66' class='md-header-anchor '></a>Defines.h</h2><p>Defines contains set constants that shouldn&#39;t need to be changed</p><h2><a name='header-c69' class='md-header-anchor '></a>Pins.h</h2><p>Pins contains the constant definitions of pins for the teensy micro-controller.</p><p>To use these libraries import them using</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></p><h1><a name='header-c77' class='md-header-anchor '></a>Direction Controller</h1><h4><a name='header-c78' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The direction controller controls all all directional movement via four motors.</p><p>To use the library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;DirectionController.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the direction controller object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">DirectionController</span> <span class="cm-variable">direction</span> <span class="cm-operator">=</span> <span class="cm-variable">DirectionController</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To use primary methods</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">direction</span>.<span class="cm-variable">calcMotors</span>(<span class="cm-variable">angle</span>, <span class="cm-variable">rotation</span>);</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//or</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">direction</span>.<span class="cm-variable">calcMotors</span>(<span class="cm-variable">angle</span>, <span class="cm-variable">rotation</span>, <span class="cm-variable">orbitNum</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//or</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">direction</span>.<span class="cm-variable">setPWM</span>(<span class="cm-variable">value</span><span class="cm-comment">/*-255 - 255*/</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><p></p><h1><a name='header-c92' class='md-header-anchor '></a>FGB Common</h1><h4><a name='header-c93' class='md-header-anchor '></a>Contains (.h)</h4><p>The FGB Common header contains methods that are being globally used across multiple libraries and methods that don&#39;t belong to a class</p><p>To use the library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;fgbcommon.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></p><h1><a name='header-c101' class='md-header-anchor '></a>Kicker</h1><h4><a name='header-c102' class='md-header-anchor '></a>Contains (.h)</h4><p>The Kicker libary controls the actions of the solenoid and lightgate on each robot</p><p>To use the library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Kicker.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To call the constructor and declare the kicker object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Kicker</span> <span class="cm-variable">kicker</span> <span class="cm-operator">=</span> <span class="cm-variable">Kicker</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To use the kicker, the lightgate must first be triggered, then the code checks if the delay between kicks it long enough (this is to allow the caps for the solenoid to charge). If both criteria are met, the solenoid will kick.</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">kicker</span>.<span class="cm-variable">kickerReady</span>();</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">kicker</span>.<span class="cm-variable">checkLightGate</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">kicker</span>.<span class="cm-variable">kick</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></p><h1><a name='header-c116' class='md-header-anchor '></a>Light</h1><h4><a name='header-c117' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The Light library controls all 20 lightsensors on the botom of the robot and keeps us from going out over the white line.</p><p>To use the Light library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Kicker.h&gt; </span><span class="cm-comment">//Do I really need to keep doing this for each libaray or do you get the jist?</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To delcare the Light object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Light</span> <span class="cm-variable">lightsensors</span> <span class="cm-operator">=</span> <span class="cm-variable">Light</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To be completely honest, the other programmer not writing this (Alistair) wrote the lightsensor code and the programmer writing this (Tom) has no damn idea how it works.</p><p></p><h1><a name='header-c130' class='md-header-anchor '></a>Motor</h1><h4><a name='header-c131' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The motor library controls our 4 Maxon DCX Motors using the LMD18200T motor control chip</p><p>To use the Motor ibaray, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Motor.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the Motor object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Motor</span> <span class="cm-variable">motorA</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">pwm_pin</span>, <span class="cm-variable">brk_pin</span>, <span class="cm-variable">dir_pin</span>, <span class="cm-variable">isRev</span>);</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Motor</span> <span class="cm-variable">motorB</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">pwm_pin</span>, <span class="cm-variable">brk_pin</span>, <span class="cm-variable">dir_pin</span>, <span class="cm-variable">isRev</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Motor</span> <span class="cm-variable">motorC</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">pwm_pin</span>, <span class="cm-variable">brk_pin</span>, <span class="cm-variable">dir_pin</span>, <span class="cm-variable">isRev</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Motor</span> <span class="cm-variable">motorD</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">pwm_pin</span>, <span class="cm-variable">brk_pin</span>, <span class="cm-variable">dir_pin</span>, <span class="cm-variable">isRev</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre><p>To use the motors</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">motorA</span>.<span class="cm-variable">set</span>(<span class="cm-variable">pwm_value</span>);</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//or</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">motorA</span>.<span class="cm-variable">brake</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></p><h1><a name='header-c145' class='md-header-anchor '></a>Read TSOPs</h1><h4><a name='header-c146' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The Read TSOPs library reads and controls our TSOP infared sensors</p><p>To use the Read TSOPs library, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;ReadTSOPS.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the TSOP object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">ReadTSOPS</span> <span class="cm-variable">tsops</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To use the TSOPS</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">tsops</span>.<span class="cm-variable">read</span>();</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//or</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">tsops</span>.<span class="cm-variable">moveTangent</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre><p></p><h1><a name='header-c160' class='md-header-anchor '></a>Rotation Controller</h1><h4><a name='header-c161' class='md-header-anchor '></a>Contains (.h, .cpp)</h4><p>The Rotation Controller library handles all rotational (non directional) movement</p><p>To use the Rotation Controller libaray, import it into your main c++ file</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;RotationController.h&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>To declare the Rotation Controller object</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">RotationController</span> <span class="cm-variable">rotation</span> <span class="cm-operator">=</span> <span class="cm-variable">RoationController</span>();</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p>Unfortunately the Rotation Controller contains code that is very specific to our robots (being the compass MPU9250 and Pixy Camera) so I wont provide any sample use.</p><hr /><h1><a name='header-c173' class='md-header-anchor '></a>Source</h1><p>If you are reading this, it means I trust you with our source code before its opensourced. If you are going to take any concepts used here, please email us at <a href='18135@bbc.qld.edu.au'>18135@bbc.qld.edu.au</a>.</p><p></p><h3><a name='header-c178' class='md-header-anchor '></a>Buzzer</h3><p></p><h4><a name='header-c181' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Buzzer_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Buzzer_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// The Buzzer Class</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Buzzer</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">playTone</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">miliS</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">errorTone</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">readyTone</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Plays a tone for a amount of time</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Buzzer::playTone</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">miliS</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">BUZZER_PIN</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delay</span>(<span class="cm-variable">miliS</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">BUZZER_PIN</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Plays a tone to signal an error until the Teensy loses power</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Buzzer::errorTone</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">BUZZER_PIN</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Plays two tones for 1.5 seconds to signal when the robot is ready to run</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Buzzer::readyTone</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">playTone</span>(<span class="cm-number">500</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delay</span>(<span class="cm-number">500</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">playTone</span>(<span class="cm-number">500</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 902px;"></div></div></div></pre><p></p><h3><a name='header-c185' class='md-header-anchor '></a>Compass</h3><p></p><h4><a name='header-c188' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Compass_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Compass_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Wire.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Vector3D.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;math.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Compass</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Compass</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">calibrate</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Vector3D</span> <span class="cm-variable">read</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">update</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">getHeading</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">setTarget</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">target_</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">long</span> <span class="cm-variable">previousTime</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">calibration</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">heading</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">target</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">doubleMod</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">value</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">maxVal</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">I2Cread</span>(<span class="cm-variable">uint8_t</span> <span class="cm-variable">Address</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Register</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Nbytes</span>, <span class="cm-variable">uint8_t</span><span class="cm-operator">*</span> <span class="cm-variable">Data</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">uint8_t</span> <span class="cm-variable">Address</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Register</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Data</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">convertRawGyro</span>(<span class="cm-variable">int16_t</span> <span class="cm-variable">raw</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// Since we are using 500 degrees/seconds range</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// -500 maps to a raw value of -32768</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// +500 maps to a raw value of 32767</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> (<span class="cm-variable">raw</span> <span class="cm-operator">*</span> <span class="cm-number">500.0</span>) <span class="cm-operator">/</span> <span class="cm-number">32768.0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 968px;"></div></div></div></pre><h4><a name='header-c190' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Compass.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//========Constructor========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-def">Compass::Compass</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Wire</span>.<span class="cm-variable">begin</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">29</span>, <span class="cm-number">0x06</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">26</span>, <span class="cm-number">0x06</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">27</span>, <span class="cm-variable">GYRO_FULL_SCALE_500_DPS</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">28</span>, <span class="cm-variable">ACC_FULL_SCALE_2_G</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">0x37</span>, <span class="cm-number">0x02</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2CwriteByte</span>(<span class="cm-variable">MAG_ADDRESS</span>, <span class="cm-number">0x0A</span>, <span class="cm-number">0x16</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">setTarget</span>(<span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//========Init Calibrate========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">Compass::calibrate</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">read</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delay</span>(<span class="cm-variable">COMPASS_CALIBRATION_TIME</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">reading</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span><span class="cm-operator">=</span><span class="cm-number">0</span>; <span class="cm-variable">i</span><span class="cm-operator">&lt;</span><span class="cm-variable">COMPASS_CALIBRATION_NUMBER</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">reading</span> <span class="cm-operator">+=</span> (<span class="cm-variable-3">double</span>) <span class="cm-variable">read</span>().<span class="cm-variable">z</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">calibration</span> <span class="cm-operator">=</span> <span class="cm-variable">reading</span><span class="cm-operator">/</span><span class="cm-variable">COMPASS_CALIBRATION_NUMBER</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">calibration</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//=====Read / Update======</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Vector3D</span> <span class="cm-def">Compass::read</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">uint8_t</span> <span class="cm-variable">buffer</span>[<span class="cm-number">14</span>];</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">I2Cread</span>(<span class="cm-variable">IMU_ADDRESS</span>, <span class="cm-number">0x3B</span>, <span class="cm-number">14</span>, <span class="cm-variable">buffer</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">int16_t</span> <span class="cm-variable">gx</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span>(<span class="cm-variable">buffer</span>[<span class="cm-number">8</span>] <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">8</span> <span class="cm-operator">|</span> <span class="cm-variable">buffer</span>[<span class="cm-number">1</span>]);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">int16_t</span> <span class="cm-variable">gy</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span>(<span class="cm-variable">buffer</span>[<span class="cm-number">10</span>] <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">8</span> <span class="cm-operator">|</span> <span class="cm-variable">buffer</span>[<span class="cm-number">11</span>]);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">int16_t</span> <span class="cm-variable">gz</span> <span class="cm-operator">=</span> <span class="cm-variable">buffer</span>[<span class="cm-number">12</span>] <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">8</span> <span class="cm-operator">|</span> <span class="cm-variable">buffer</span>[<span class="cm-number">13</span>];</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Vector3D</span> <span class="cm-variable">returnVector</span> <span class="cm-operator">=</span> {<span class="cm-variable">convertRawGyro</span>(<span class="cm-variable">gx</span>), <span class="cm-variable">convertRawGyro</span>(<span class="cm-variable">gy</span>), <span class="cm-variable">convertRawGyro</span>(<span class="cm-variable">gz</span>)};</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">returnVector</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Compass::update</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">reading</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">double</span>) <span class="cm-variable">read</span>().<span class="cm-variable">z</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable-3">long</span> <span class="cm-variable">currentTime</span> <span class="cm-operator">=</span> <span class="cm-variable">micros</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">heading</span> <span class="cm-operator">+=</span> (((<span class="cm-variable-3">double</span>)(<span class="cm-variable">currentTime</span> <span class="cm-operator">-</span> <span class="cm-variable">previousTime</span>) <span class="cm-operator">/</span> <span class="cm-number">1000000.0</span>) <span class="cm-operator">*</span> (<span class="cm-variable">reading</span> <span class="cm-operator">-</span> <span class="cm-variable">calibration</span>));</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">heading</span> <span class="cm-operator">=</span> <span class="cm-variable">doubleMod</span>(<span class="cm-variable">heading</span>, <span class="cm-number">360.0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">previousTime</span> <span class="cm-operator">=</span> <span class="cm-variable">currentTime</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//=======Set Target=======</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Compass::setTarget</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">target_</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">target</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-variable">target_</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//=======Get Heading======</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">Compass::getHeading</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">curr</span> <span class="cm-operator">=</span> (<span class="cm-variable">heading</span> <span class="cm-operator">-</span> <span class="cm-number">180</span>) <span class="cm-operator">+</span> <span class="cm-variable">target</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">curr</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//======Utility Functions======</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">Compass::doubleMod</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">value</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">maxVal</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">fmod</span>((<span class="cm-variable">value</span> <span class="cm-operator">+</span> <span class="cm-variable">maxVal</span>), <span class="cm-variable">maxVal</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Compass::I2Cread</span>(<span class="cm-variable">uint8_t</span> <span class="cm-variable">Address</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Register</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Nbytes</span>, <span class="cm-variable">uint8_t</span><span class="cm-operator">*</span> <span class="cm-variable">Data</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// Set register address</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">beginTransmission</span>(<span class="cm-variable">Address</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">write</span>(<span class="cm-variable">Register</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">endTransmission</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// Read Nbytes</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">requestFrom</span>(<span class="cm-variable">Address</span>, <span class="cm-variable">Nbytes</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">uint8_t</span> <span class="cm-variable">index</span><span class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">while</span> (<span class="cm-variable">Wire</span>.<span class="cm-variable">available</span>())</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Data</span>[<span class="cm-variable">index</span><span class="cm-operator">++</span>]<span class="cm-operator">=</span><span class="cm-variable">Wire</span>.<span class="cm-variable">read</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Write a byte (Data) in device (Address) at register (Register)</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Compass::I2CwriteByte</span>(<span class="cm-variable">uint8_t</span> <span class="cm-variable">Address</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Register</span>, <span class="cm-variable">uint8_t</span> <span class="cm-variable">Data</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">{</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// Set register address</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">beginTransmission</span>(<span class="cm-variable">Address</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">write</span>(<span class="cm-variable">Register</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">write</span>(<span class="cm-variable">Data</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">Wire</span>.<span class="cm-variable">endTransmission</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2074px;"></div></div></div></pre><p></p><h3><a name='header-c194' class='md-header-anchor '></a>Config</h3><p></p><h4><a name='header-c197' class='md-header-anchor '></a>Config.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Config_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Config_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Tsops</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_NUM 12</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define READ_THRESHOLD 40</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_NUM 12</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MAX_READS 512</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_FORWARD_LOWER 29</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_FORWARD_UPPER 331</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_ORBIT_ANGLE 90</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_MIN_THRESHOLD 30</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_K1 12</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_K2 2</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define TSOP_K3 1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MED_STRENGTH 100</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define HIGH_STRENGTH 150</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Compass</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define COMPASS_CALIBRATION_TIME 2000</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define COMPASS_CALIBRATION_NUMBER 50</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//SPI</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define DATA_LENGTH 1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Lightsensors</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHTSENSOR_NUM 19</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHTSENSOR_THRESHOLD 30</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define DETECTED_NUMBER_LIGHT 3</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Pixy</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Kicker</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define KICKER_DELAY 2000L</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHTGATE_THRESHOLD 100</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 858px;"></div></div></div></pre><h4><a name='header-c199' class='md-header-anchor '></a>Defines.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Defines_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Defines_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//=========IMU (compass) Definitions=========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define IMU_ADDRESS 0x68</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MAG_ADDRESS 0x0C</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define GYRO_FULL_SCALE_250_DPS 0x00</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define GYRO_FULL_SCALE_500_DPS 0x08</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define GYRO_FULL_SCALE_1000_DPS 0x10</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define GYRO_FULL_SCALE_2000_DPS 0x18</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define ACC_FULL_SCALE_2_G 0x00</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define ACC_FULL_SCALE_4_G 0x08</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define ACC_FULL_SCALE_8_G 0x10</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define ACC_FULL_SCALE_16_G 0x18</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Pixy</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define PIXY_CENTRE_X 160</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define PIXY_CENTRE_Y 100</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//=================Other====================</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define angToRad 0.01745329251</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define radToAng 57.2957795131</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//================Lightsensors==============</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define maxNumClusters 20</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//CARTESIAN CO-ORDINATES</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light1x 1.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light1y 0.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light2x 0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light2y 0.3090169943749474</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light3x 0.8090169943749475</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light3y 0.5877852522924731</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light4x 0.587785252292473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light4y 0.8090169943749475</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light5x 0.30901699437494745</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light5y 0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light6x -0.30901699437494756</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light6y 0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light7x -0.587785252292473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light7y 0.8090169943749475</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light8x -0.8090169943749473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light8y 0.5877852522924732</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light9x -0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light9y 0.3090169943749475</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light10x -1.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light10y 0.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light11x -0.9510565162951536</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light11y -0.3090169943749473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light12x -0.8090169943749472</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light12y -0.5877852522924734</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light13x -0.5877852522924732</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light13y -0.8090169943749473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light14x -0.30901699437494756</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light14y -0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light15x 0.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light15y -1.0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light16x 0.30901699437494723</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light16y -0.9510565162951536</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light17x 0.5877852522924737</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light17y -0.809016994374947</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light18x 0.8090169943749473</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light18y -0.5877852522924734</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light19x 0.9510565162951535</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define light19y -0.3090169943749476</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1892px;"></div></div></div></pre><h4><a name='header-c201' class='md-header-anchor '></a>Pins.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Pins_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Pins_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//========Tsop Pins========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define POWER_PIN_1 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define POWER_PIN_2 20</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//========Light Pins=======</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//NOTE: SENSOR 1 IS THE RIGHT HAND ONE AND THEN THEY GO ANTICLOCKWISE AROUND THE CIRCLE</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//(excluding the top most one - ask Al if ur unsure)</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_1 A4</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_2 A3</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_3 A2</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_4 A1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_5 A0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_6 A18</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_7 A17</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_8 A16</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_9 A15</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_10 A14</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_11 A13</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_12 A12</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_13 A11</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_14 A10</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_15 A9</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_16 A8</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_17 A7</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_18 A6</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHT_19 A5</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//============Kicker pins==========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LIGHTGATE_PIN 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define KICKER_PIN 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//============Buzzer pins==========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define BUZZER_PIN 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Motor Pins</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_A_PWM 3</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_B_PWM 4</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_C_PWM 5</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_D_PWM 21</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_A_DIR 6</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_B_DIR 7</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_C_DIR 8</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_D_DIR 22</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_A_BRK 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_B_BRK 1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_C_BRK 2</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_D_BRK 20</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_A_REV 1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_B_REV 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_C_REV 1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define MOTOR_D_REV 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//============LED Indicators==========</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LED_IND_1 28</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LED_IND_2 27</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LED_IND_3 26</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define LED_IND_4 25</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1430px;"></div></div></div></pre><p></p><h3><a name='header-c205' class='md-header-anchor '></a>Direction Controller</h3><p></p><h4><a name='header-c208' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef DirectionController_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define DirectionController_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Motor.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #include &lt;Light.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;ReadTSOPS.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;RotationController.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">lightStruct</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">bool</span> <span class="cm-variable">seeing</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">DirectionController</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">DirectionController</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calculate motor angles</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">calcMotors</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">rotation</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calculate motor angles</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">calcMotors</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">rotation</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">dirNum</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calculate lightsensors</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">lightStruct</span> <span class="cm-variable">calcLight</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Combines lightsensors and tsop direction</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">move</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">setPWM</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Motor</span> <span class="cm-variable">motorD</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">MOTOR_A_PWM</span>, <span class="cm-variable">MOTOR_A_DIR</span>, <span class="cm-variable">MOTOR_A_BRK</span>, <span class="cm-variable">MOTOR_A_REV</span>); <span class="cm-comment">//Really Motor D</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Motor</span> <span class="cm-variable">motorA</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">MOTOR_B_PWM</span>, <span class="cm-variable">MOTOR_B_DIR</span>, <span class="cm-variable">MOTOR_B_BRK</span>, <span class="cm-variable">MOTOR_B_REV</span>); <span class="cm-comment">//Really Motor A</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Motor</span> <span class="cm-variable">motorB</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">MOTOR_C_PWM</span>, <span class="cm-variable">MOTOR_C_DIR</span>, <span class="cm-variable">MOTOR_C_BRK</span>, <span class="cm-variable">MOTOR_C_REV</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Motor</span> <span class="cm-variable">motorC</span> <span class="cm-operator">=</span> <span class="cm-variable">Motor</span>(<span class="cm-variable">MOTOR_D_PWM</span>, <span class="cm-variable">MOTOR_D_DIR</span>, <span class="cm-variable">MOTOR_D_BRK</span>, <span class="cm-variable">MOTOR_D_REV</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">angleArray</span>[<span class="cm-number">4</span>] <span class="cm-operator">=</span> {<span class="cm-number">60</span>, <span class="cm-number">135</span>, <span class="cm-number">225</span>, <span class="cm-number">300</span>};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">direction</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// Light light = Light();</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">lightAngle</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">lightStruct</span> <span class="cm-variable">values</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// RotationController rotationController = RotationController();</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1232px;"></div></div></div></pre><h4><a name='header-c210' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;DirectionController.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-def">DirectionController::DirectionController</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// light.init();</span></span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">DirectionController::calcMotors</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">rotation</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Solve the whole going forward while no seeing ball thing</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">angle</span> <span class="cm-operator">!=</span> <span class="cm-number">65506.00</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorA</span>.<span class="cm-variable">set</span>((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">angle</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">100</span>); <span class="cm-comment">//Probs should do this motor stuff in the main application? I guess we can do it here tho. Might be less clear to observers</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorB</span>.<span class="cm-variable">set</span>((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">angle</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">100</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorC</span>.<span class="cm-variable">set</span>((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">angle</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">100</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorD</span>.<span class="cm-variable">set</span>((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">3</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">angle</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">100</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }<span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorA</span>.<span class="cm-variable">set</span>(<span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorB</span>.<span class="cm-variable">set</span>(<span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorC</span>.<span class="cm-variable">set</span>(<span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">motorD</span>.<span class="cm-variable">set</span>(<span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">DirectionController::calcMotors</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angle</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">rotation</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">dirNum</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">newAngle</span> <span class="cm-operator">=</span> (<span class="cm-variable">abs</span>(<span class="cm-variable">round</span>(<span class="cm-variable">angle</span><span class="cm-operator">/</span>(<span class="cm-number">360</span><span class="cm-operator">*</span><span class="cm-number">1</span><span class="cm-operator">/</span><span class="cm-variable">dirNum</span>))))<span class="cm-operator">*</span>(<span class="cm-number">360</span><span class="cm-operator">*</span><span class="cm-number">1</span><span class="cm-operator">/</span><span class="cm-variable">dirNum</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">newAngle</span> <span class="cm-operator">!=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">direction</span> <span class="cm-operator">=</span> <span class="cm-variable">newAngle</span> <span class="cm-operator">&lt;</span> <span class="cm-number">180</span> <span class="cm-operator">?</span> (<span class="cm-variable">newAngle</span> <span class="cm-operator">+</span> <span class="cm-number">90</span>) : (<span class="cm-variable">newAngle</span> <span class="cm-operator">-</span> <span class="cm-number">90</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorA</span>.<span class="cm-variable">set</span>(((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">direction</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">255</span>) <span class="cm-operator">+</span> <span class="cm-variable">rotation</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorB</span>.<span class="cm-variable">set</span>(((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">direction</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">255</span>) <span class="cm-operator">+</span> <span class="cm-variable">rotation</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorC</span>.<span class="cm-variable">set</span>(((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">direction</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">255</span>) <span class="cm-operator">+</span> <span class="cm-variable">rotation</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorD</span>.<span class="cm-variable">set</span>(((<span class="cm-variable">cos</span>(((<span class="cm-variable">angleArray</span>[<span class="cm-number">3</span>] <span class="cm-operator">+</span> <span class="cm-number">90</span>) <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>) <span class="cm-operator">-</span> (<span class="cm-variable">direction</span> <span class="cm-operator">*</span> <span class="cm-variable">angToRad</span>))) <span class="cm-operator">*</span> <span class="cm-number">255</span>) <span class="cm-operator">+</span> <span class="cm-variable">rotation</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">lightStruct</span> <span class="cm-def">DirectionController::calcLight</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">values</span> <span class="cm-operator">=</span> {<span class="cm-atom">false</span>, <span class="cm-number">0</span>};</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//light.readLight();</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//light.averageAngles();</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//lightAngle = light.getAngle();</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">lightAngle</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">0</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span> <span class="cm-operator">=</span> {<span class="cm-atom">true</span>, <span class="cm-variable">lightAngle</span>};</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">values</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">values</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">DirectionController::move</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">tsopAngle</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">calcLight</span>().<span class="cm-variable">seeing</span> <span class="cm-operator">==</span> <span class="cm-atom">false</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">calcMotors</span>(<span class="cm-variable">tsopAngle</span>, <span class="cm-comment">/*rotationController.rotate()*/</span><span class="cm-number">0.00</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">calcMotors</span>(<span class="cm-variable">calcLight</span>().<span class="cm-variable">angle</span><span class="cm-comment">/*Takes in angle to move away from line as oppose to following ball*/</span>, <span class="cm-comment">/*rotationController.rotate()*/</span><span class="cm-number">0.00</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">DirectionController::setPWM</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorA</span>.<span class="cm-variable">set</span>(<span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorB</span>.<span class="cm-variable">set</span>(<span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorC</span>.<span class="cm-variable">set</span>(<span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">motorD</span>.<span class="cm-variable">set</span>(<span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1540px;"></div></div></div></pre><p></p><h3><a name='header-c214' class='md-header-anchor '></a>FGB Common</h3><p></p><h4><a name='header-c217' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef fgbcommon_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define fgbcommon_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define SHIFTARRAY(arr, input){ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-meta">for(int q = sizeof(arr)/sizeof(arr[0]) - 1; q &gt;= 0; q--){ &nbsp; \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-meta">*(arr + q + 1) = *(arr + q); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-meta">} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-meta">*(arr + 0) = input; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 330px;"></div></div></div></pre><p></p><h3><a name='header-c221' class='md-header-anchor '></a>Kicker</h3><p></p><h4><a name='header-c224' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Kicker_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Kicker_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">enum</span> <span class="cm-def">kickerStatus</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">unknown</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">notReady</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">waitingForLightGate</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">waitingForCharge</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">ready</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Kicker</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Kicker</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Check if the kicker is ready to kick</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">kickerReady</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Check if the light gate is seeing the ball</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">checkLightGate</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Kick the ball</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">kickBall</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">kickerStatus</span> <span class="cm-variable">status</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">long</span> <span class="cm-variable">currentMSec</span>, <span class="cm-variable">lastKick</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 682px;"></div></div></div></pre><h4><a name='header-c226' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Kicker.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-def">Kicker::Kicker</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">KICKER_PIN</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">KICKER_PIN</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">LIGHTGATE_PIN</span>, <span class="cm-variable">INPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::unknown</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Kicker::kickerReady</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">long</span> <span class="cm-variable">currentMSec</span> <span class="cm-operator">=</span> <span class="cm-variable">micros</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>((<span class="cm-variable">currentMSec</span> <span class="cm-operator">-</span> <span class="cm-variable">lastKick</span>) <span class="cm-operator">&gt;=</span> <span class="cm-variable">KICKER_DELAY</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::waitingForLightGate</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::waitingForCharge</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Kicker::checkLightGate</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">analogRead</span>(<span class="cm-variable">LIGHTGATE_PIN</span>) <span class="cm-operator">&lt;=</span> <span class="cm-variable">LIGHTGATE_THRESHOLD</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">status</span> <span class="cm-operator">==</span> <span class="cm-variable">kickerStatus::waitingForLightGate</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::ready</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Kicker::kickBall</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">status</span> <span class="cm-operator">==</span> <span class="cm-variable">kickerStatus::ready</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">KICKER_PIN</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">delay</span>(<span class="cm-number">50</span>); <span class="cm-comment">//To Change in the future to a loop system. This will slow the robot down.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">KICKER_PIN</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">lastKick</span> <span class="cm-operator">=</span> <span class="cm-variable">micros</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::notReady</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">kickerStatus::notReady</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 836px;"></div></div></div></pre><p></p><h3><a name='header-c230' class='md-header-anchor '></a>Light</h3><h4><a name='header-c231' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><h4><a name='header-c233' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p></p><h3><a name='header-c237' class='md-header-anchor '></a>Motor</h3><p></p><h4><a name='header-c240' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef Motor_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define Motor_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Motor</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Motor</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">dir</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">brk</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">rev</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Set a pwm value to the motor</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">set</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Stop the motor with no coast</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">brake</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">r_brk</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">r_pwm</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">r_dir</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">reversed</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 572px;"></div></div></div></pre><h4><a name='header-c242' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Motor.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-def">Motor::Motor</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">dir</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">brk</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">rev</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">pwm</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">dir</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">brk</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">reversed</span> <span class="cm-operator">=</span> <span class="cm-variable">rev</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">r_pwm</span> <span class="cm-operator">=</span> <span class="cm-variable">pwm</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">r_dir</span> <span class="cm-operator">=</span> <span class="cm-variable">dir</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">r_brk</span> <span class="cm-operator">=</span> <span class="cm-variable">brk</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">analogWriteFrequency</span>(<span class="cm-variable">pwm</span>, <span class="cm-number">19000</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Motor::set</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">pwm</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">r_dir</span>, <span class="cm-variable">pwm</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> <span class="cm-operator">?</span> <span class="cm-operator">!</span><span class="cm-variable">reversed</span> : <span class="cm-variable">reversed</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">analogWrite</span>(<span class="cm-variable">r_pwm</span>, <span class="cm-variable">pwm</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> <span class="cm-operator">?</span> <span class="cm-variable">pwm</span> : <span class="cm-operator">-</span><span class="cm-variable">pwm</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">r_brk</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">Motor::brake</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">r_dir</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">analogWrite</span>(<span class="cm-variable">r_pwm</span>, <span class="cm-number">0</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">r_brk</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 484px;"></div></div></div></pre><p></p><h3><a name='header-c246' class='md-header-anchor '></a>Read TSOPs</h3><p></p><h4><a name='header-c249' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef ReadTSOPS_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define ReadTSOPS_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;math.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">ReadTSOPS</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">ReadTSOPS</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Read the Tsops</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">read</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Reset the Tsops by dropping power</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">reset</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Stop reading tsops, error has occured</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">stop</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calculate a tangent to move on to orbit around the ball</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">moveTangent</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Find the strength for the ball and determine how to orbit</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">findStrength</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">bestSensor</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">angleToBall</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">sensors</span>[<span class="cm-number">12</span>] <span class="cm-operator">=</span> {<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>,<span class="cm-number">4</span>,<span class="cm-number">5</span>,<span class="cm-number">6</span>,<span class="cm-number">7</span>,<span class="cm-number">8</span>,<span class="cm-number">9</span>,<span class="cm-number">15</span>,<span class="cm-number">16</span>,<span class="cm-number">17</span>};</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">values</span>[<span class="cm-number">12</span>];</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">index</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">value_index</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">mod</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">m</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">correctOrbit</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angleIn</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 946px;"></div></div></div></pre><h4><a name='header-c251' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;ReadTSOPS.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #define TSOP_NUM 12</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #define MAX_READS 128</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #define POWER_PIN_1 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #define POWER_PIN_2 0</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// #define READ_THRESHOLD 40</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-def">ReadTSOPS::ReadTSOPS</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">sensors</span>[<span class="cm-variable">i</span>], <span class="cm-variable">INPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">pinMode</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">OUTPUT</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">bestSensor</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">ReadTSOPS::read</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">bestSensor</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">value_index</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">MAX_READS</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> (<span class="cm-variable">digitalRead</span>(<span class="cm-variable">sensors</span>[<span class="cm-variable">i</span>]) <span class="cm-operator">==</span> <span class="cm-variable">HIGH</span> <span class="cm-operator">?</span> <span class="cm-number">0</span> : <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delayMicroseconds</span>(<span class="cm-number">3000</span>); <span class="cm-comment">//We can remove this if we dont need it later.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// Filtering</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_MIN_THRESHOLD</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">value_index</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-variable">i</span>; <span class="cm-comment">//1-12 as oppose to 0-11</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">value_index</span> <span class="cm-operator">=</span> <span class="cm-variable">values</span>[<span class="cm-variable">i</span>];</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">bestSensor</span> <span class="cm-operator">=</span> <span class="cm-variable">index</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">ReadTSOPS::reset</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delay</span>(<span class="cm-number">2</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">ReadTSOPS::stop</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">ReadTSOPS::moveTangent</span>(){ <span class="cm-comment">//Hmmmmm This shouldnt be done here, it should be done later down the course.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">read</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Begin weighting</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">angleToBall</span> <span class="cm-operator">=</span> <span class="cm-variable">index</span> <span class="cm-operator">*</span> <span class="cm-number">30.00</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> (<span class="cm-variable-3">int</span>)<span class="cm-variable">correctOrbit</span>(<span class="cm-variable">angleToBall</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> (<span class="cm-variable-3">int</span>)<span class="cm-variable">angleToBall</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// if(angleToBall &lt; 180.00 &amp;&amp; angleToBall != 0){</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// &nbsp; &nbsp; return angleToBall + 90.00;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// }</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// if(angleToBall &gt; 180.00 &amp;&amp; angleToBall != 0){</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// &nbsp; &nbsp; return angleToBall - 90.00;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// }</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// return 0;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">ReadTSOPS::findStrength</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">bestSensor</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">value_index</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">HIGH</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">MAX_READS</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> (<span class="cm-variable">digitalRead</span>(<span class="cm-variable">sensors</span>[<span class="cm-variable">i</span>]) <span class="cm-operator">==</span> <span class="cm-variable">HIGH</span> <span class="cm-operator">?</span> <span class="cm-number">0</span> : <span class="cm-number">1</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_1</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">digitalWrite</span>(<span class="cm-variable">POWER_PIN_2</span>, <span class="cm-variable">LOW</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">delayMicroseconds</span>(<span class="cm-number">3000</span>); <span class="cm-comment">//We can remove this if we dont need it later.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">for</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">TSOP_NUM</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// Filtering</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&lt;</span> <span class="cm-number">30</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">values</span>[<span class="cm-variable">i</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">value_index</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>; <span class="cm-comment">//1-12 as oppose to 0-11</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">value_index</span> <span class="cm-operator">=</span> <span class="cm-variable">values</span>[<span class="cm-variable">i</span>];</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-comment">// values[i] = 0;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">bestSensor</span> <span class="cm-operator">=</span> <span class="cm-variable">index</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">tempStr</span> <span class="cm-operator">=</span> <span class="cm-variable">TSOP_K1</span> <span class="cm-operator">*</span> <span class="cm-variable">values</span>[<span class="cm-variable">bestSensor</span>] <span class="cm-operator">+</span> <span class="cm-variable">TSOP_K2</span> <span class="cm-operator">*</span> (<span class="cm-variable">values</span>[<span class="cm-variable">mod</span>(<span class="cm-variable">bestSensor</span><span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-variable">TSOP_NUM</span>)] <span class="cm-operator">+</span> <span class="cm-variable">values</span>[<span class="cm-variable">mod</span>(<span class="cm-variable">bestSensor</span><span class="cm-operator">+</span><span class="cm-number">1</span>, <span class="cm-variable">TSOP_NUM</span>)]) <span class="cm-operator">+</span> <span class="cm-variable">TSOP_K3</span> <span class="cm-operator">*</span> (<span class="cm-variable">values</span>[<span class="cm-variable">mod</span>(<span class="cm-variable">bestSensor</span><span class="cm-operator">-</span><span class="cm-number">2</span>, <span class="cm-variable">TSOP_NUM</span>)] <span class="cm-operator">+</span> <span class="cm-variable">values</span>[<span class="cm-variable">mod</span>(<span class="cm-variable">bestSensor</span><span class="cm-operator">+</span><span class="cm-number">2</span>, <span class="cm-variable">TSOP_NUM</span>)]);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">tempStr</span><span class="cm-operator">/</span><span class="cm-number">16</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">ReadTSOPS::mod</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>,<span class="cm-variable-3">int</span> <span class="cm-variable">m</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span> <span class="cm-operator">%</span> <span class="cm-variable">m</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">r</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0</span> <span class="cm-operator">?</span> <span class="cm-variable">r</span> <span class="cm-operator">+</span> <span class="cm-variable">m</span> : <span class="cm-variable">r</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">ReadTSOPS::correctOrbit</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">angleIn</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">angleIn</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">TSOP_FORWARD_LOWER</span> <span class="cm-operator">||</span> <span class="cm-variable">angleIn</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">TSOP_FORWARD_UPPER</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">angleIn</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }<span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> <span class="cm-variable">angleIn</span> <span class="cm-operator">&lt;</span> <span class="cm-number">180</span> <span class="cm-operator">?</span> (<span class="cm-variable">angleIn</span> <span class="cm-operator">+</span> <span class="cm-variable">TSOP_ORBIT_ANGLE</span>) : (<span class="cm-variable">angleIn</span> <span class="cm-operator">-</span> <span class="cm-variable">TSOP_ORBIT_ANGLE</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2772px;"></div></div></div></pre><p></p><h3><a name='header-c255' class='md-header-anchor '></a>Rotation Controller</h3><p></p><h4><a name='header-c258' class='md-header-anchor '></a>.h</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#ifndef RotationController_h</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#define RotationController_h</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Config.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Pins.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Defines.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Arduino.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;PixyI2C.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;Compass.h&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">RotationController</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">RotationController</span>(){};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Gets the pixy information</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">bool</span> <span class="cm-variable">getPixy</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calulates the pixy and which direction to go</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">calcPixy</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Calculates the rotation needed to face the centre of the goal</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">calcRotation</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//Uses compass library to find the compass roataion required</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">void</span> <span class="cm-variable">getCompass</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//The final rotation to add to the motors</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">rotate</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">private</span>:</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">PixyI2C</span> <span class="cm-variable">pixy</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">Compass</span> <span class="cm-variable">compass</span> <span class="cm-operator">=</span> <span class="cm-variable">Compass</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">rotationToAdd</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">finalRotation</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">int</span> <span class="cm-variable">blockHeight</span>, <span class="cm-variable">blockWidth</span>, <span class="cm-variable">blockX</span>, <span class="cm-variable">blockY</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">compassHeading</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">double</span> <span class="cm-variable">newTarget</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">};</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#endif</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 968px;"></div></div></div></pre><h4><a name='header-c260' class='md-header-anchor '></a>.cpp</h4><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;RotationController.h&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">RotationController::getPixy</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">pixy</span>.<span class="cm-variable">getBlocks</span>()){ <span class="cm-comment">//seing the block</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">blockHeight</span> <span class="cm-operator">=</span> <span class="cm-variable">pixy</span>.<span class="cm-variable">blocks</span>[<span class="cm-number">0</span>].<span class="cm-variable">height</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">blockWidth</span> <span class="cm-operator">=</span> <span class="cm-variable">pixy</span>.<span class="cm-variable">blocks</span>[<span class="cm-number">0</span>].<span class="cm-variable">width</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">blockX</span> <span class="cm-operator">=</span> <span class="cm-variable">pixy</span>.<span class="cm-variable">blocks</span>[<span class="cm-number">0</span>].<span class="cm-variable">x</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">blockY</span> <span class="cm-operator">=</span> <span class="cm-variable">pixy</span>.<span class="cm-variable">blocks</span>[<span class="cm-number">0</span>].<span class="cm-variable">y</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">return</span> <span class="cm-atom">true</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">RotationController::getCompass</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">compass</span>.<span class="cm-variable">update</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">compassHeading</span> <span class="cm-operator">=</span> <span class="cm-variable">compass</span>.<span class="cm-variable">getHeading</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">RotationController::calcPixy</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">getPixy</span>()){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">if</span>(<span class="cm-variable">blockX</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">PIXY_CENTRE_X</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">rotationToAdd</span> <span class="cm-operator">=</span> <span class="cm-variable">blockX</span> <span class="cm-operator">-</span> <span class="cm-variable">PIXY_CENTRE_X</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">blockX</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">PIXY_CENTRE_X</span>){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-variable">rotationToAdd</span> <span class="cm-operator">=</span> <span class="cm-variable">PIXY_CENTRE_X</span> <span class="cm-operator">-</span> <span class="cm-variable">blockX</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">else</span>{</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">rotationToAdd</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">RotationController::calcRotation</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">newTarget</span> <span class="cm-operator">=</span> <span class="cm-variable">compassHeading</span> <span class="cm-operator">&gt;</span> <span class="cm-number">180</span> <span class="cm-operator">?</span> <span class="cm-variable">compassHeading</span> <span class="cm-operator">-</span> <span class="cm-variable">rotationToAdd</span> : <span class="cm-variable">compassHeading</span> <span class="cm-operator">+</span> <span class="cm-variable">rotationToAdd</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">compass</span>.<span class="cm-variable">setTarget</span>(<span class="cm-variable">newTarget</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">RotationController::rotate</span>(){</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">compass</span>.<span class="cm-variable">update</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">finalRotation</span> <span class="cm-operator">=</span> <span class="cm-variable">compass</span>.<span class="cm-variable">getHeading</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 946px;"></div></div></div></pre><p></p><hr /><p></p><p></p><p></p><p></p></div>
</body>
</html>
